{
	"rules": {
		"activeEventId": {
			".indexOn": ".value",
			".read": true,
			".write": "root.child('admins/'+auth.uid).exists()",
			".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
		},
		"admins": {
			".indexOn": ".value",
			".read": "auth !== null",
			".write": false
		},
		"answers": {
			".read": "auth !== null",
			".write": "auth !== null",
			"$answerId": {
				"correctChoiceId": {
					".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
				},
				"eventId": {
					".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
				},
				"gameId": {
					".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
				},
				"responses": {
					"$responseId": {
						"$playerId": {
							".validate": "newData.isNumber() && newData.val() <= 999999999999999"
						}
					}
				}
			}
		},
		"disableAll": {
			".indexOn": ".value",
			".read": true,
			".write": "root.child('admins/'+auth.uid).exists()",
			".validate": "newData.isBoolean()"
		},
		"events": {
			".indexOn": "alias",
			".read": true,
			".write": true
		},
		"games": {
			".indexOn": "event",
			".read": "auth !== null",
			"$gameId": {
				"activeQuestionId": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
				},
				"event": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isString() && newData.val().length > 0 && newData.val().length === 20"
				},
				"name": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 100"
				},
				"questionExpirationTime": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isNumber() && newData.val() > now && newData.val() <= 9999999999999"
				},
				"questions": {
					"$questionId": {
						"choices": {
							"$choiceId": {
								"chosenCount": {
									".write": "root.child('admins/'+auth.uid).exists()",
									".validate": "newData.isNumber() && newData.val() > 0"
								},
								"text": {
									".write": "root.child('admins/'+auth.uid).exists()",
									".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 200"
								}
							}
						},
						"correctChoice": {
							".write": "root.child('admins/'+auth.uid).exists()",
							".validate": "newData.isString() && newData.val().length > 0 && newData.val().length === 20"
						},
						"order": {
							".write": "root.child('admins/'+auth.uid).exists()",
							".validate": "newData.isNumber() && newData.val() < 100"
						},
						"question": {
							".write": "root.child('admins/'+auth.uid).exists()",
							".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 300"
						}
					}
				},
				"showGameOver": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
				},
				"showGameResults": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
				},
				"showQuestionResults": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
				},
				"startTime": {
					".write": "root.child('admins/'+auth.uid).exists()",
					".validate": "newData.isNumber() && newData.val() > now && newData.val() <= 9999999999999"
				}
			}
		},
		"leaderboardCurrent": {
			".read": "auth !== null",
			".write": "root.child('admins/'+auth.uid).exists()"
		},
		"mostRecentEvent": {
			".indexOn": ".value",
			".read": "auth !== null",
			".write": "root.child('admins/'+auth.uid).exists()",
			".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
		},
		"mostRecentGame": {
			".indexOn": ".value",
			".read": "auth !== null",
			".write": "root.child('admins/'+auth.uid).exists()",
			".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)"
		},
		"playerResultsEvent": {
			".read": "auth !== null",
			".write": "auth !== null",
			"$eventId": {
				".indexOn": "indexVal",
				".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)",
				"$playerId": {
					".validate": "newData.hasChildren(['indexVal', 'score', 'timeElapsed', 'timeRemaining'])"
				}
			}
			
		},
		"playerResultsGame": {
			".read": "auth !== null",
			".write": "auth !== null",
			"$gameId": {
				".indexOn": "indexVal",
				".validate": "newData.isBoolean() || (newData.isString() && newData.val().length > 0 && newData.val().length === 20)",
				"$playerId": {
					".validate": "newData.hasChildren(['indexVal', 'score', 'timeElapsed', 'timeRemaining'])"
				}
			}
			
		},
		"players": {
			".indexOn": "alias",
			".read": "auth !== null",
			".write": "auth !== null",
			"$playerId": {
				".validate": "newData.hasChildren(['active', 'companyName', 'email', 'event', 'firstName', 'lastName', 'phoneNumber'])",
				"active": {
					".validate": "newData.isBoolean()"
				},
				"companyName": {
					".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 50"
				},
				"email": {
					".validate": "newData.isString() && newData.val().matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i) && newData.val().length <= 100"
				},
				"event": {
					".validate": "newData.isString() && newData.val().length > 0 && newData.val().length === 20"
				},
				"firstName": {
					".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 50"
				},
				"lastName": {
					".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 50"
				},
				"phoneNumber": {
					".validate": "newData.isString() && newData.val().length >= 10 && newData.val().length <= 14"
				},
				"$other": {
					".validate": false
				}
			}
		},
		"questionDuration": {
			".indexOn": ".value",
			".read": "auth !== null",
			".write": "root.child('admins/'+auth.uid).exists()",
			".validate": "newData.isNumber() && newData.val() <= 60000"
		},
		"resetApp": {
			".indexOn": ".value",
			".read": true,
			".write": "root.child('admins/'+auth.uid).exists()",
			".validate": "newData.isBoolean()"
		},
		"sfmc": {
			".read": "root.child('admins/'+auth.uid).exists()",
			".write": "root.child('admins/'+auth.uid).exists()",
			"accessToken": {
				".validate": "newData.isString()"
			},
			"expiresIn": {
				".validate": "newData.isNumber() && newData.val() <= 3600000"
			},
			"timestamp": {
				".validate": "newData.isNumber() && newData.val() > now"
			}
		}
	}
}
