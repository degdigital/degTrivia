const test = require('firebase-functions-test')({
    databaseURL: "https://degtrivia-develop.firebaseio.com",
    projectId: "degtrivia-develop",
    storageBucket: "degtrivia-develop.appspot.com"
}, 'functions/configs/degTrivia-develop-8cd7b654f41a.json');

// const functions = require('firebase-functions');
// test.mockConfig({ 
//     firebase: {
//         databaseURL: "https://degtrivia-develop.firebaseio.com",
//         projectId: "degtrivia-develop",
//         storageBucket: "degtrivia-develop.appspot.com",
//     }
// })

const myFunction = require('../components/updateMostRecentGameId');
// const wrappedFn = test.wrap(myFunctions.updateMostRecentGameId);
const db = require('./__mocks__/db');

describe('updateMostRecentGameId', () => {
    it('should run if next val is valid', () => {
        const change = test.makeChange(
            { val: () => false },
            { val: () => '1' }
        );
        console.log(change);
        return myFunction(db, change).then(result => {
            expect(result).toBeTruthy();
            expect(result).toEqual({mostRecentGame: '1'})
        })
    })
})